



import matplotlib.pyplot as plt
import numpy


def drawBasic(tlist, x, slicerate):

     y = []
     label = []
     pots = []

     a = [57.38462203595842, 61.34090329150676, 60.28524138208902, 58.30141235707424, 59.049924880818324,
          70.41528301528568, 66.47347310619098, 60.36544520315087, 64.35821298300603, 64.7286512898148,
          70.03144658235996, 70.24259556739014, 67.02343545426108, 71.53537374700744, 69.51358953332347,
          68.80776479449479, 69.7721150873597, 66.65851952205037, 67.73960292430804, 70.75861525532015,
          72.9276402798519, 71.66950784213913, 67.58314755915202, 72.07287618728672, 70.00090418123852,
          70.19424548582857, 72.57801531415996, 70.48632143693548, 70.62282211254654, 72.5406065606073]
     b = [45.18573070394567, 40.14592839143995, 47.919121420135546, 37.936847176929085, 37.83576400825511,
          41.2686689692541, 43.32980313939716, 43.43699461809698, 43.36144079774873, 45.795430870960615,
          45.353532624171585, 46.67698186337736, 47.97359327423507, 46.272091906304496, 46.15999281360593,
          46.98372211240443, 47.63674331326684, 47.157162126599616, 48.4951980054713, 49.30333596575153,
          48.29508513250669, 48.500124337141976, 48.82074099456877, 49.029094339885255, 48.31021179638067,
          49.481584882819654, 49.21223428631606, 48.503096210274194, 48.87898051534448, 49.08693446456866]
     c = [27.527121634649664, 29.175052529930046, 30.846088749682096, 24.92322941977004, 26.546358541312852,
          28.114595052540615, 29.095056182535288, 29.30125222425957, 29.893517567620172, 30.523542403085933,
          30.94100513956848, 31.494290673156012, 31.008836184727272, 30.992809105284962, 31.945987354539934,
          31.69074466080074, 32.628927399509394, 31.256687111362307, 31.715080842635622, 32.08863460015311,
          31.928720287303438, 31.968481102492028, 31.64359242822878, 32.083399212234056, 33.30658412025124,
          32.38454428291471, 33.5084065025905, 31.88771398322598, 32.831670436675566, 32.33735390039922]
     d = [20.39271440281352, 22.60566235347828, 22.73040057891489, 18.324402152696443, 19.887895905768794,
          20.682060030386538, 22.17810391732723, 23.18986698953409, 23.11761992610367, 23.56786450775861,
          24.33631311610086, 24.425415718717378, 24.761237544079478, 24.384087750092657, 24.32148002010182,
          23.869382967049194, 24.518643263256543, 25.14728558603217, 23.915235191583584, 25.606848339865206,
          24.17443725292163, 25.343810669823448, 25.04604505511331, 25.63033726314571, 24.41830808869212,
          25.722298129179016, 25.574320604544873, 24.455965582809455, 24.52742536559818, 25.8456656287963]

     y.append(d)
     y.append(c)
     y.append(b)
     y.append(a)

     for k in range(len(tlist)):

          label.append('sub-model with $r_i$ = ' + str(slicerate[k]) + ", $t_i=$" + str(tlist[k]) + "$s$")

          tmp = []
          for i in range(len(x)):
               tmp.append([x[i], y[k][i]])
          pots.append(tmp)

     return y, label, pots


x = [1, 5, 10, 20, 30, 40, 50, 60, 70, 80, 100, 120, 140, 150, 160, 170, 180, 200, 250, 300, 350, 400, 450, 550, 600, 650, 700, 750, 800, 1000]

y, label, pots = drawBasic([0.0126, 0.0071, 0.00315, 0.00084], x, [1, 0.75, 0.5, 0.25])
print(y)

fig=plt.figure(figsize=(10,10))
ax=fig.add_subplot(111)
ax.axis([0, 800, 0, 100])

line_sym = ["-", "--", "-.", "-"]
pot_sym = ["o", ">", "<", "x"]
colors = ['blue', 'brown', 'aqua', 'green']

for i in range(len(y)):
     ax.plot(x[3:], y[i][3:], line_sym[i], marker=pot_sym[i], ms=10, label=label[i], linewidth=2, color=colors[i])


# y_sche = [79.36507936507937, 79.36507936507937, 79.36507936507937, 79.36507936507937, 79.36507936507937, 79.36507936507937, 79.36507936507935, 100.12515644555694, 125.14078338130396, 150.02625459455405, 175.07440662281468, 200.1350911865509, 225.2083176938668, 250.04688379071075, 275.1203651597574, 300.20639189442744, 350.103280467738, 375.03187770960534, 400.18108193957767, 425.1030874987185, 450.01462547532793, 475.1900760304122, 500.0950180534302, 525.2928507643011, 600.3031530923116, 625.1844294066749, 650.0552546966492, 675.3055757730373, 700.1697911743597, 750.3001200480192, 800.4462487836969, 875.442098259621, 900.265578345612, 925.0786316836931, 950.4300696064969, 975.2364948500011, 1000.0325010562843, 1025.4101640656263, 1075.5996468030926, 1175.346727284549, 1190.4761904761904, 1190.4761904761904]
# ax.plot(x, y_sche, "--", marker='*', ms=10, label="combination of sub-models", linewidth=2)


plt.legend(fontsize=15)
plt.xticks(fontsize=20)
plt.yticks(fontsize=20)
ax.set_xlabel('Ingesting rate(#examples/second)', fontsize=20)
ax.set_ylabel('Throughput(batches processed/second)', fontsize=20)
plt.grid(linestyle='-.')
plt.savefig('./batch_throughput.jpg')
plt.show()
# 每妙发送500条
