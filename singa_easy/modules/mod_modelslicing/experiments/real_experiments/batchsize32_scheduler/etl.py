

fo = open("prediction_32_scheduler_batch.txt", "r")
contents = fo.readlines()

throughput = []
latency = []
pertim = []
averageBatch = []
batchThroug = []
imgNum = []
SubModelCombinationRate = {}

X = []

for ele in contents:
    ele = ele.strip()

    imgn = "When num_img/batch_size="
    if imgn in ele:
        X.append(int(ele[len(imgn):]))

    o = "sr_idx=scheduler num_img="
    a = "sr_idx=scheduler average_time="
    b = "sr_idx=scheduler total_time="
    c = "sr_idx=scheduler throughput="
    d = "sr_idx=scheduler average_batch_time="
    e = "sr_idx=scheduler throughput_batch="
    f = "Schedule result="
    if o in ele:
        imgNum.append(float(ele[len(o):]))
    if a in ele:
        pertim.append(float(ele[len(a):]))
    if b in ele:
        latency.append(float(ele[len(b):])) # 毫秒
    if c in ele:
        throughput.append(float(ele[len(c):])*1000) # 每秒处理的量
    if d in ele:
        averageBatch.append(float(ele[len(d):]))
    if e in ele:
        batchThroug.append(float(ele[len(e):])*1000)
    if f in ele:
        listText = ele[len("Schedule result=")+1:-1]
        listTextList = listText.split(" ")
        listTextList = [int(ele) for ele in listTextList if ele != ""]
        SubModelCombinationRate[X[-1]] = listTextList

print("X->")
print(X)

print("Throughput->")
print("a=", throughput)

print("Latency->")
print("a=", latency)

print("BatchThroughput->")
print("a=", batchThroug)


print("AverageTime->")
print("a=", pertim)

print("AverageBatchTime->")
print("a=", averageBatch)

print("imgNum->")
print("o=", imgNum)

print("SubModelCombinationRate->")
print("f=", SubModelCombinationRate)

fo.close()


'''
X->
[1, 5, 10, 20, 30, 40, 50, 60, 70, 80, 100, 120, 140, 150, 160, 170, 180, 200, 250, 300, 350, 400, 450, 550, 600, 650, 700, 750, 800, 1000]

Throughput->
a= [633.0488366910487, 660.2020663739888, 696.9070444809888, 413.58714568077846, 757.9607054411246, 767.1975325229297, 763.8781468089422, 763.4920521873797, 643.6349107329457, 767.1107790111308, 665.6662151396764, 774.8611271250163, 763.3099205024894, 710.7785972349673, 779.1044616704534, 770.164707197363, 2017.9722173161322, 865.2086862684831, 1081.8927113194084, 1339.7172773808425, 1427.7056211403021, 1748.4424234241985, 1974.104147038498, 2159.880743685082, 2166.387515185857, 1968.3063635706058, 2153.703896139617, 2276.373651213354, 2207.590246106145, 2207.8315041726605]

Latency->
a= [50.54902267456055, 242.35004425048828, 459.1717109680176, 1547.4368743896484, 1266.5564231872559, 1668.409954071045, 2094.574909210205, 2514.7609519958496, 3480.23384475708, 3337.1972732543945, 4807.21407699585, 4955.72673034668, 5869.175651550293, 6753.157760620117, 6571.647644042969, 7063.424160003662, 7263.424160003662, 7397.05934715271, 7394.448558807373, 7165.690972328186, 7844.754432678223, 7320.80154800415, 7294.447976112366, 8148.598042488098, 8862.68032169342, 10567.460627555847, 10400.686946868896, 10543.084606170654, 11596.354914665222, 14493.859671592712]

BatchThroughput->
a= [19.78277614659527, 20.63131457418715, 21.7783451400309, 12.924598302524327, 23.686272045035142, 23.974922891341553, 23.871192087779445, 23.859126630855616, 20.113590960404554, 23.97221184409784, 20.802069223114888, 24.21441022265676, 23.853435015702793, 22.211831163592727, 24.347014427201668, 24.067647099917593, 63.06163179112913, 27.037771445890098, 33.80914722873151, 41.86616491815133, 44.61580066063444, 54.638825732006204, 61.69075459495306, 67.49627324015881, 67.69960984955803, 61.50957386158143, 67.30324675436303, 71.13667660041732, 68.98719519081703, 68.99473450539564]

AverageTime->
a= [1.579656958580017, 1.5146877765655518, 1.434911596775055, 2.417870116233826, 1.319329607486725, 1.3034452766180038, 1.3091093182563782, 1.309771329164505, 1.5536758235522679, 1.303592684864998, 1.502254399061203, 1.290553836027781, 1.3100838507924761, 1.4069078667958577, 1.2835249304771423, 1.2984235588242026, 0.4955469611618254, 1.1557905229926109, 0.9243060698509217, 0.7464261429508527, 0.7004245029176984, 0.5719376209378243, 0.5065588872300254, 0.46298852514136923, 0.4615979334215323, 0.5080509917094157, 0.4643163815566472, 0.43929519192377725, 0.45298261385411026, 0.45293311473727227]

AverageBatchTime->
a= [50.54902267456055, 48.470008850097656, 45.91717109680176, 77.37184371948243, 42.2185474395752, 41.71024885177612, 41.8914981842041, 41.91268253326416, 49.71762635367257, 41.71496591567993, 48.072140769958494, 41.297722752888994, 41.922683225359236, 45.021051737467445, 41.072797775268555, 41.54955388237448, 15.857502757178413, 36.98529673576355, 29.577794235229494, 23.885636574427288, 22.41358409336635, 18.302003870010378, 16.209884391360813, 14.815632804523815, 14.771133869489034, 16.257631734701302, 14.85812420981271, 14.057446141560872, 14.495443643331528, 14.493859671592713]

imgNum->
o= [32.0, 160.0, 320.0, 640.0, 960.0, 1280.0, 1600.0, 1920.0, 2240.0, 2560.0, 3200.0, 3840.0, 4480.0, 4800.0, 5120.0, 5440.0, 5760.0, 6400.0, 8000.0, 9600.0, 11200.0, 12800.0, 14400.0, 17600.0, 19200.0, 20800.0, 22400.0, 24000.0, 25600.0, 32000.0]

'''


