import random

import matplotlib.pyplot as plt
from matplotlib.patches import Polygon
import matplotlib.pyplot as plt
import numpy as np



def drawBasic(tlist, x, slicerate):

     y = []
     label = []
     pots = []

     a = [17.426271438598633, 16.302335739135742, 16.587807846069335, 17.15224313735962, 16.93482255935669,
          14.201462483406067, 15.043594884872437, 16.565768655141195, 15.53803242274693, 15.44910916686058,
          14.27929949760437, 14.236375975608826, 14.920154319490706, 13.979097998936972, 14.385676336288451,
          14.53324349347283, 14.332373309135438, 15.00183333158493, 14.762413076400756, 14.132554691632588,
          13.712222089767456, 13.952935217618942, 14.796588145362007, 13.874845196984031, 14.285529761314391,
          14.246182049237765, 13.778277012280055, 14.187149784723918, 14.159728683829307, 13.785382386684418]
     b = [22.13088035583496, 24.90912628173828, 20.868496131896972, 26.359596920013427, 26.430020014444988,
          24.231457543373107, 23.078803215026856, 23.0218505859375, 23.061964307512557, 21.83623957633972,
          22.048999099731446, 21.423835905392966, 20.844800894601004, 21.611298707326252, 21.663781535625457,
          21.283967192032758, 20.992199097739327, 21.205686578750612, 20.6205983505249, 20.282603203455608,
          20.706040733882357, 20.61850384235382, 20.48309754477607, 20.396052863381126, 20.69955735683441,
          20.209538606496956, 20.320150354930334, 20.617240509033202, 20.458691843748092, 20.37201978302002]
     c = [36.32780838012695, 34.27585945129395, 32.41902103424072, 40.12321128845215, 37.669950040181476,
          35.56871433258057, 34.370100326538086, 34.12823425928752, 33.45206858771188, 32.76159715652466,
          32.3195705986023, 31.751786708831787, 32.248872355052406, 32.2655489730835, 31.30283590555191,
          31.554954315634333, 30.647651629977755, 31.993153862953186, 31.53074100494385, 31.163681859970094,
          31.319764494214738, 31.280810520648956, 31.6019744682312, 31.16876716787165, 30.024093626340232,
          30.878927653386043, 29.843257390430995, 31.360040438334146, 30.458395406007767, 30.92398973274231]
     d = [49.0371208190918, 44.23670425415039, 43.9939453125, 54.57203960418701, 50.281840006510414, 48.351082944869994,
          45.08951728820801, 43.12228269577027, 43.25704822540283, 42.43065805435181, 41.09085855484009,
          40.94096131324768, 40.38570359093802, 41.01035110473633, 41.11591889858246, 41.89467324649586,
          40.785290982988144, 39.76572328567505, 41.81434938812256, 39.0520530573527, 41.366009456089564,
          39.457365469932554, 39.92646335177951, 39.01626380226829, 40.95287832260132, 38.87677512242244,
          39.10172299248832, 40.88981874847412, 40.77068771362305, 38.69120704269409]

     y.append(d)
     y.append(c)
     y.append(b)
     y.append(a)

     for k in range(len(tlist)):

          label.append('sub-model with $r_i$ = ' + str(slicerate[k]) + ", $t_i=$" + str(tlist[k]) + "$s$")

          tmp = []
          for i in range(len(x)):
               tmp.append([x[i], y[k][i]])
          pots.append(tmp)

     return y, label, pots

import numpy


x = [1, 5, 10, 20, 30, 40, 50, 60, 70, 80, 100, 120, 140, 150, 160, 170, 180, 200, 250, 300, 350, 400, 450, 550, 600, 650, 700, 750, 800, 1000]
x = numpy.array(x)
x = [ele*32 for ele in x]
y, label, pots = drawBasic([0.0126, 0.0071, 0.00315, 0.00079], x, [1, 0.75, 0.5, 0.25])


fig=plt.figure(figsize=(10, 10))
ax=fig.add_subplot(111)
ax.axis([0, 800*32, 0, 55])


line_sym = ["-", "--", "-.", "-"]
pot_sym = ["o", ">", "<", "x"]
colors = ['blue', 'brown', 'aqua', 'green']
for i in range(len(y)):
     y_i = [ele for ele in y[i]]
     ax.plot(x, y_i, line_sym[i], marker=pot_sym[i], ms=10, label=label[i], linewidth=2,  color=colors[i])



plt.legend(fontsize=15)
plt.xticks(fontsize=20)
plt.yticks(fontsize=20)
ax.set_xlabel('Ingesting rate(#examples/second)', fontsize=20)
ax.set_ylabel('ProcessTimeOfABatch(millisecond)', fontsize=20)
plt.grid(linestyle='-.')
plt.savefig('./average_time_batch.jpg')
plt.show()






