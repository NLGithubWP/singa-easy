import random

import matplotlib.pyplot as plt
import numpy

a = [1836.3079051506695, 1962.9089053282164, 1929.1277242268486, 1865.6451954263757, 1889.5975961861864,
     2253.289056489142, 2127.1511393981114, 1931.6942465008278, 2059.462815456193, 2071.316841274074,
     2241.006290635519, 2247.7630581564845, 2144.7499345363544, 2289.131959904238, 2224.434865066351,
     2201.848473423833, 2232.70768279551, 2133.072624705612, 2167.6672935778574, 2264.275688170245,
     2333.684488955261, 2293.424250948452, 2162.660721892865, 2306.332037993175, 2240.028933799633,
     2246.2158555465144, 2322.4964900531186, 2255.5622859819355, 2259.9303076014894, 2321.2994099394336]
b = [1445.9433825262615, 1284.6697085260785, 1533.4118854443375, 1213.9791096617307, 1210.7444482641636,
     1320.5974070161312, 1386.553700460709, 1389.9838277791034, 1387.5661055279593, 1465.4537878707397,
     1451.3130439734907, 1493.6634196280754, 1535.1549847755223, 1480.7069410017439, 1477.1197700353898,
     1503.4791075969417, 1524.375786024539, 1509.0291880511877, 1551.8463361750817, 1577.706750904049,
     1545.4427242402141, 1552.0039787885432, 1562.2637118262007, 1568.9310188763282, 1545.9267774841815,
     1583.410716250229, 1574.791497162114, 1552.0990787287742, 1564.1273764910234, 1570.781902866197]
c = [880.8678923087892, 933.6016809577615, 987.0748399898271, 797.5433414326412, 849.4834733220113,
     899.6670416812997, 931.0417978411292, 937.6400711763063, 956.5925621638455, 976.7533568987499,
     990.1121644661914, 1007.8173015409924, 992.2827579112727, 991.7698913691188, 1022.2715953452779,
     1014.1038291456236, 1044.1256767843006, 1000.2139875635938, 1014.8825869643399, 1026.8363072048994,
     1021.71904919371, 1022.9913952797449, 1012.5949577033209, 1026.6687747914898, 1065.8106918480396,
     1036.3054170532707, 1072.269008082896, 1020.4068474632313, 1050.613453973618, 1034.795324812775]
d = [652.5668608900327, 723.381195311305, 727.3728185252764, 586.3808688862862, 636.4126689846014,
     661.8259209723692, 709.6993253544714, 742.0757436650908, 739.7638376353175, 754.1716642482755,
     778.7620197152276, 781.6133029989561, 792.3596014105433, 780.290808002965, 778.2873606432582,
     763.8202549455742, 784.5965844242094, 804.7131387530294, 765.2875261306747, 819.4191468756866,
     773.5819920934922, 811.0019414343503, 801.4734417636259, 820.1707924206627, 781.3858588381479,
     823.1135401337285, 818.3782593454359, 782.5908986499026, 784.8776116991418, 827.0613001214816]


def drawBasic(tlist, x, slicerate):

     y = []
     label = []
     pots = []


     y.append(d)
     y.append(c)
     y.append(b)
     y.append(a)

     for k in range(len(tlist)):

          label.append('Sub-model with $r_i$ = ' + str(slicerate[k]))

          tmp = []
          for i in range(len(x)):
               tmp.append([x[i], y[k][i]])
          pots.append(tmp)

     return y, label, pots


x = [1, 5, 10, 20, 30, 40, 50, 60, 70, 80, 100, 120, 140, 150, 160, 170, 180, 200, 250, 300, 350, 400, 450, 550, 600, 650, 700, 750, 800, 1000]
x = [ele*32 for ele in x]
x = numpy.array(x)

y, label, pots = drawBasic([0.0126, 0.0071, 0.00315, 0.00084], x, [1, 0.75, 0.5, 0.25])
print(y)

fig=plt.figure(figsize=(10, 10))
ax=fig.add_subplot(111)
ax.axis([5, 1000*32, 0, 2500/32])

line_sym = ["-", "--", "-.", "-"]
pot_sym = ["o", ">", "<", "x"]
colors = ['blue', 'brown', 'aqua', 'green']

for i in range(len(y)):
     y[i] = [ele/32 for ele in y[i]]
     ax.plot(x, y[i], line_sym[i], marker=pot_sym[i], ms=10, label=label[i], linewidth=2, color=colors[i])


y_idealy = [709.2198581560284, 709.2198581560284, 709.2198581560284, 709.2198581560284, 709.2198581560284, 709.2198581560284, 709.2198581560283, 709.2198581560284, 709.2198581560284, 709.2198581560284, 709.2198581560283, 709.2198581560284, 709.2198581560284, 709.2198581560284, 709.2198581560284, 709.2198581560284, 720.0180004500112, 800.0100001250015, 1000.0250006250155, 1200.0450016875632, 1400.0017500021875, 1600.0240003600054, 1600.0240003600054, 2040.760203801019, 2040.760203801019, 2040.760203801019, 2040.760203801019, 2040.760203801019, 2040.760203801019, 2040.760203801019]
y_idealy = [ele/32 for ele in y_idealy]

y_real_experiment = [633.0488366910487, 660.2020663739888, 696.9070444809888, 413.58714568077846, 757.9607054411246, 767.1975325229297, 763.8781468089422, 763.4920521873797, 643.6349107329457, 767.1107790111308, 665.6662151396764, 774.8611271250163, 763.3099205024894, 710.7785972349673, 779.1044616704534, 770.164707197363, 820.9722173161322, 865.2086862684831, 1081.8927113194084, 1339.7172773808425, 1427.7056211403021, 1748.4424234241985, 1974.104147038498, 2159.880743685082, 2166.387515185857, 1968.3063635706058, 2153.703896139617, 2276.373651213354, 2207.590246106145, 2207.8315041726605]
y_real_experiment = [ele/32 for ele in y_real_experiment]
ax.plot(x, y_real_experiment, "--", marker='*', ms=15, label="Combination of sub-models", linewidth=4)
ax.plot(x, y_idealy, "--", label="Theoretical value", linewidth=4)


plt.legend(fontsize=15)
plt.xticks(fontsize=20)
plt.yticks(fontsize=20)
ax.set_xlabel('Ingesting rate(#instances/second)', fontsize=20)
ax.set_ylabel('Throughput(mini-batches processed/second)', fontsize=20)
plt.grid(linestyle='-.')
plt.savefig('./pdfs/batch_throughput.pdf', bbox_inches='tight', dpi=fig.dpi, pad_inches=0.1)
plt.show()
# 每妙发送500条
