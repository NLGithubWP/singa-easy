import random

import matplotlib.pyplot as plt
from matplotlib.patches import Polygon
import matplotlib.pyplot as plt
import numpy as np



def drawBasic(tlist, x, slicerate):

     y = []
     label = []
     pots = []

     a = [124.31158447265625, 40.63303089141846, 31.095766639709474, 22.52681083679199, 20.70962775548299,
          18.2992271900177, 19.203231859207154, 17.685568499565125, 16.273706027439662, 16.387439960241316,
          15.656969828605652, 14.911129689216613, 14.741234840665545, 15.656205927530925, 15.390886196494103,
          14.783515846028047, 15.38525136841668, 14.90814125061035, 15.611329566955567, 14.662603883743285,
          14.40331054006304, 14.484403414726257, 14.057909055285984, 14.590393098484386, 14.424182538191477,
          14.405619847224308, 14.905454681260245, 14.556330916086832, 14.70273212313652]
     b = [196.02313232421875, 57.02353935241699, 37.211191177368164, 33.21523370742798, 28.723680114746095,
          27.0501008272171, 26.25566478729248, 24.638446235656737, 24.43106186730521, 22.900238752365112,
          22.079928064346312, 22.611187569300334, 22.61278670174735, 22.396329962412516, 22.017159193754196,
          21.906186423582188, 21.987455956141154, 21.37280786037445, 21.507626613616942, 21.415084136327106,
          20.613558147975375, 21.00622405767441, 20.47422696855333, 20.63650957107544, 20.586788767178852,
          20.52781075844398, 20.828996129717147, 20.738746079762777, 20.497092928886413]
     c = [294.4361877441406, 77.33041152954101, 61.13998031616211, 51.070034980773926, 45.995635986328125,
          42.05346820354462, 40.0196464920044, 38.660915263493855, 35.289672429221014, 36.27547832727432,
          35.07638958930969, 34.21816509564717, 33.480020236969, 33.807970193227135, 33.73157202601433,
          33.64749118019553, 31.83346324496799, 32.96362754821777, 31.94580601501465, 31.79921633084615,
          30.91565266745431, 30.877622900009154, 31.00534435696072, 31.54356880534779, 31.03909306526184,
          32.054465995201696, 30.618954529081073, 29.90039986673991, 31.20839751124382]
     d = [430.4192199707031, 110.07477035522462, 77.25707054138184, 71.58511753082276, 61.134121322631835,
          54.320567989349364, 51.57624885559082, 48.632589689890544, 50.242148072378974, 47.21473317146301,
          44.24531524658203, 43.00269705454509, 43.30616317476545, 43.61985148111979, 44.35058162212372,
          42.00159737082089, 41.70766593085395, 41.087642650604245, 42.91981175994873, 40.51098176320394,
          40.93987158639091, 42.278031125068665, 42.021323386298285, 40.167240815596145, 39.26339755694072,
          39.44730886019193, 41.08341312135969, 39.27180828348796, 41.150528783798215]

     y.append(d)
     y.append(c)
     y.append(b)
     y.append(a)

     for k in range(len(tlist)):

          label.append('sub-model with $r_i$ = ' + str(slicerate[k]) + ", $t_i=$" + str(tlist[k]) + "$s$")

          tmp = []
          for i in range(len(x)):
               tmp.append([x[i], y[k][i]])
          pots.append(tmp)

     return y, label, pots

import numpy


x = [1, 5, 10, 20, 30, 40, 50, 60, 70, 80, 100, 120, 140, 150, 160, 170, 180, 200, 250, 300, 350, 400, 450, 550, 600, 650, 700, 750, 800]
x = numpy.array(x)
x = [ele*32 for ele in x]
y, label, pots = drawBasic([0.0126, 0.0071, 0.00315, 0.00079], x, [1, 0.75, 0.5, 0.25])


fig=plt.figure(figsize=(10, 10))
ax=fig.add_subplot(111)
ax.axis([0, 800*32, 0, 400])


line_sym = ["-", "--", "-.", "-"]
pot_sym = ["o", ">", "<", "x"]
colors = ['blue', 'brown', 'aqua', 'green']
for i in range(len(y)):
     y_i = [ele for ele in y[i]]
     ax.plot(x, y_i, line_sym[i], marker=pot_sym[i], ms=10, label=label[i], linewidth=2,  color=colors[i])



plt.legend(fontsize=15)
plt.xticks(fontsize=20)
plt.yticks(fontsize=20)
ax.set_xlabel('Ingesting rate(#examples/second)', fontsize=20)
ax.set_ylabel('ProcessTimeOfABatch(second)', fontsize=20)
plt.grid(linestyle='-.')
plt.savefig('./average_time_batch.jpg')
plt.show()






