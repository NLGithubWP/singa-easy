



import matplotlib.pyplot as plt
import numpy


def drawBasic(tlist, x, slicerate):

     y = []
     label = []
     pots = []

     a = [8.044302582435199, 24.610519522214528, 32.158718310002826, 44.39154779809073, 48.286720157741335,
          54.64711649383226, 52.07456782960944, 56.543277080665476, 61.44881800825609, 61.02234408950806,
          63.869318964451, 67.06399990090469, 67.8369221309313, 63.87243529043858, 64.97351661451376, 67.64290784513716,
          64.99731307951399, 67.07744333714702, 64.05604312631358, 68.20071031917595, 69.4284829323428,
          69.03977826130571, 71.1343341365539, 68.53824932954532, 69.32801892601266, 69.41735313060347,
          67.08953342142868, 68.69863056595236, 68.01456978369208]
     b = [5.10143873400624, 17.536617532977004, 26.873635816533593, 30.10666758537268, 34.81448045672332,
          36.96843891220643, 38.08701886245865, 40.58697494295727, 40.93149963891855, 43.66766699743342,
          45.29000262526922, 44.225894678690835, 44.22276710913862, 44.650172670178, 45.4191202052842,
          45.649205236539565, 45.48047768667377, 46.78842417584341, 46.49513486378262, 46.69605749078834,
          48.511760697568754, 47.60493829135657, 48.84189286051751, 48.457807099395374, 48.57484143395312,
          48.71440075940181, 48.00999499794808, 48.21892298376791, 48.787406266315294]
     c = [3.39632165346802, 12.931523060859305, 16.355909747253452, 19.580953887665533, 21.74119301877341,
          23.77925157468253, 24.98772697054663, 25.865916344310268, 28.336902304935165, 27.566831537770057,
          28.509205528518027, 29.22424382502053, 29.86856020163899, 29.578823995778766, 29.64581666187345,
          29.71989782669404, 31.413484367211378, 30.33646702072589, 31.303013595274326, 31.44731585822042,
          32.34607435775488, 32.385912712202455, 32.252504229178136, 31.702183293555024, 32.21743618273352,
          31.196900929489583, 32.65950831372202, 33.444368786263716, 32.042657737864246]
     d = [2.3233163241828882, 9.084733920160623, 12.943799098159719, 13.96938406323668, 16.357477270713634,
          18.409233132394164, 19.388769485735892, 20.56234320188534, 19.90360759574605, 21.179829532625817,
          22.601262855218337, 23.25435538918848, 23.09140147014227, 22.925341697525845, 22.54761862020684,
          23.808618304948432, 23.976407638295413, 24.338217904192508, 23.29926341692778, 24.68466466315804,
          24.42606586808193, 23.65294630305176, 23.79744185605696, 24.895909693944418, 25.469013438018862,
          25.350271764904736, 24.34072351890573, 25.463558815050934, 24.301024301629873]
     y.append(d)
     y.append(c)
     y.append(b)
     y.append(a)

     for k in range(len(tlist)):

          label.append('sub-model with $r_i$ = ' + str(slicerate[k]) + ", $t_i=$" + str(tlist[k]) + "$s$")

          tmp = []
          for i in range(len(x)):
               tmp.append([x[i], y[k][i]])
          pots.append(tmp)

     return y, label, pots


x = [1, 5, 10, 20, 30, 40, 50, 60, 70, 80, 100, 120, 140, 150, 160, 170, 180, 200, 250, 300, 350, 400, 450, 550, 600, 650, 700, 750, 800]

y, label, pots = drawBasic([0.0126, 0.0071, 0.00315, 0.00084], x, [1, 0.75, 0.5, 0.25])
print(y)

fig=plt.figure(figsize=(10,10))
ax=fig.add_subplot(111)
ax.axis([0, 800, 0, 100])

line_sym = ["-", "--", "-.", "-"]
pot_sym = ["o", ">", "<", "x"]
colors = ['blue', 'brown', 'aqua', 'green']

for i in range(len(y)):
     ax.plot(x[3:], y[i][3:], line_sym[i], marker=pot_sym[i], ms=10, label=label[i], linewidth=2, color=colors[i])


# y_sche = [79.36507936507937, 79.36507936507937, 79.36507936507937, 79.36507936507937, 79.36507936507937, 79.36507936507937, 79.36507936507935, 100.12515644555694, 125.14078338130396, 150.02625459455405, 175.07440662281468, 200.1350911865509, 225.2083176938668, 250.04688379071075, 275.1203651597574, 300.20639189442744, 350.103280467738, 375.03187770960534, 400.18108193957767, 425.1030874987185, 450.01462547532793, 475.1900760304122, 500.0950180534302, 525.2928507643011, 600.3031530923116, 625.1844294066749, 650.0552546966492, 675.3055757730373, 700.1697911743597, 750.3001200480192, 800.4462487836969, 875.442098259621, 900.265578345612, 925.0786316836931, 950.4300696064969, 975.2364948500011, 1000.0325010562843, 1025.4101640656263, 1075.5996468030926, 1175.346727284549, 1190.4761904761904, 1190.4761904761904]
# ax.plot(x, y_sche, "--", marker='*', ms=10, label="combination of sub-models", linewidth=2)


plt.legend(fontsize=15)
plt.xticks(fontsize=20)
plt.yticks(fontsize=20)
ax.set_xlabel('Ingesting rate(#examples/second)', fontsize=20)
ax.set_ylabel('Throughput(batches processed/second)', fontsize=20)
plt.grid(linestyle='-.')
plt.savefig('./batch_throughput.jpg')
plt.show()
# 每妙发送500条
